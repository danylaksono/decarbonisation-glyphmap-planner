import{center as A}from"../center@7.2.0/index.js";import G from"../jsts@2.7.2/index.js";import{featureEach as y,geomEach as d}from"../meta@7.2.0/index.js";import{geoAzimuthalEquidistant as O}from"../../d3-geo@1.7.1/index.js";import{featureCollection as p,radiansToLength as q,lengthToRadians as R,feature as S,earthRadius as T}from"../helpers@7.2.0/index.js";var{BufferOp:k,GeoJSONReader:F,GeoJSONWriter:J}=G;function h(e,r,t){t=t||{};var a=t.units||"kilometers",i=t.steps||8;if(!e)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(r===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return d(e,function(u){var n=c(u,r,a,i);n&&o.push(n)}),p(o);case"FeatureCollection":return y(e,function(u){var n=c(u,r,a,i);n&&y(n,function(f){f&&o.push(f)})}),p(o)}return c(e,r,a,i)}function c(e,r,t,a){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return d(e,function(N){var m=c(N,r,t,a);m&&u.push(m)}),p(u)}var n=x(o),f={type:o.type,coordinates:l(o.coordinates,n)},b=new F,E=b.read(f),g=q(R(r,t),"meters"),s=k.bufferOp(E,g,a),j=new J;if(s=j.write(s),!w(s.coordinates)){var C={type:s.type,coordinates:v(s.coordinates,n)};return S(C,i)}}function w(e){return Array.isArray(e[0])?w(e[0]):isNaN(e[0])}function l(e,r){return typeof e[0]!="object"?r(e):e.map(function(t){return l(t,r)})}function v(e,r){return typeof e[0]!="object"?r.invert(e):e.map(function(t){return v(t,r)})}function x(e){var r=A(e).geometry.coordinates,t=[-r[0],-r[1]];return O().rotate(t).scale(T)}var z=h;export{h as buffer,z as default};
