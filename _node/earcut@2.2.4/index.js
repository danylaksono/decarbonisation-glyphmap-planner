function J(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D={exports:{}};D.exports=j,D.exports.default=j;function j(t,x,n){n=n||2;var r=x&&x.length,e=r?x[0]*n:t.length,u=A(t,0,e,n,!0),i=[];if(!u||u.next===u.prev)return i;var v,f,a,y,l,o,d;if(r&&(u=U(t,x,u,n)),t.length>80*n){v=a=t[0],f=y=t[1];for(var c=n;c<e;c+=n)l=t[c],o=t[c+1],l<v&&(v=l),o<f&&(f=o),l>a&&(a=l),o>y&&(y=o);d=Math.max(a-v,y-f),d=d!==0?32767/d:0}return b(u,i,n,v,f,d,0),i}function A(t,x,n,r,e){var u,i;if(e===P(t,x,n,r)>0)for(u=x;u<n;u+=r)i=I(u,t[u],t[u+1],i);else for(u=n-r;u>=x;u-=r)i=I(u,t[u],t[u+1],i);return i&&k(i,i.next)&&(M(i),i=i.next),i}function g(t,x){if(!t)return t;x||(x=t);var n=t,r;do if(r=!1,!n.steiner&&(k(n,n.next)||Z(n.prev,n,n.next)===0)){if(M(n),n=x=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==x);return x}function b(t,x,n,r,e,u,i){if(t){!i&&u&&$(t,r,e,u);for(var v=t,f,a;t.prev!==t.next;){if(f=t.prev,a=t.next,u?L(t,r,e,u):K(t)){x.push(f.i/n|0),x.push(t.i/n|0),x.push(a.i/n|0),M(t),t=a.next,v=a.next;continue}if(t=a,t===v){i?i===1?(t=N(g(t),x,n),b(t,x,n,r,e,u,2)):i===2&&S(t,x,n,r,e,u):b(g(t),x,n,r,e,u,1);break}}}}function K(t){var x=t.prev,n=t,r=t.next;if(Z(x,n,r)>=0)return!1;for(var e=x.x,u=n.x,i=r.x,v=x.y,f=n.y,a=r.y,y=e<u?e<i?e:i:u<i?u:i,l=v<f?v<a?v:a:f<a?f:a,o=e>u?e>i?e:i:u>i?u:i,d=v>f?v>a?v:a:f>a?f:a,c=r.next;c!==x;){if(c.x>=y&&c.x<=o&&c.y>=l&&c.y<=d&&s(e,v,u,f,i,a,c.x,c.y)&&Z(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function L(t,x,n,r){var e=t.prev,u=t,i=t.next;if(Z(e,u,i)>=0)return!1;for(var v=e.x,f=u.x,a=i.x,y=e.y,l=u.y,o=i.y,d=v<f?v<a?v:a:f<a?f:a,c=y<l?y<o?y:o:l<o?l:o,w=v>f?v>a?v:a:f>a?f:a,z=y>l?y>o?y:o:l>o?l:o,_=E(d,c,x,n,r),q=E(w,z,x,n,r),h=t.prevZ,p=t.nextZ;h&&h.z>=_&&p&&p.z<=q;){if(h.x>=d&&h.x<=w&&h.y>=c&&h.y<=z&&h!==e&&h!==i&&s(v,y,f,l,a,o,h.x,h.y)&&Z(h.prev,h,h.next)>=0||(h=h.prevZ,p.x>=d&&p.x<=w&&p.y>=c&&p.y<=z&&p!==e&&p!==i&&s(v,y,f,l,a,o,p.x,p.y)&&Z(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;h&&h.z>=_;){if(h.x>=d&&h.x<=w&&h.y>=c&&h.y<=z&&h!==e&&h!==i&&s(v,y,f,l,a,o,h.x,h.y)&&Z(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=q;){if(p.x>=d&&p.x<=w&&p.y>=c&&p.y<=z&&p!==e&&p!==i&&s(v,y,f,l,a,o,p.x,p.y)&&Z(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function N(t,x,n){var r=t;do{var e=r.prev,u=r.next.next;!k(e,u)&&B(e,r,r.next,u)&&m(e,u)&&m(u,e)&&(x.push(e.i/n|0),x.push(r.i/n|0),x.push(u.i/n|0),M(r),M(r.next),r=t=u),r=r.next}while(r!==t);return g(r)}function S(t,x,n,r,e,u){var i=t;do{for(var v=i.next.next;v!==i.prev;){if(i.i!==v.i&&T(i,v)){var f=G(i,v);i=g(i,i.next),f=g(f,f.next),b(i,x,n,r,e,u,0),b(f,x,n,r,e,u,0);return}v=v.next}i=i.next}while(i!==t)}function U(t,x,n,r){var e=[],u,i,v,f,a;for(u=0,i=x.length;u<i;u++)v=x[u]*r,f=u<i-1?x[u+1]*r:t.length,a=A(t,v,f,r,!1),a===a.next&&(a.steiner=!0),e.push(R(a));for(e.sort(V),u=0;u<e.length;u++)n=W(e[u],n);return n}function V(t,x){return t.x-x.x}function W(t,x){var n=X(t,x);if(!n)return x;var r=G(n,t);return g(r,r.next),g(n,n.next)}function X(t,x){var n=x,r=t.x,e=t.y,u=-1/0,i;do{if(e<=n.y&&e>=n.next.y&&n.next.y!==n.y){var v=n.x+(e-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(v<=r&&v>u&&(u=v,i=n.x<n.next.x?n:n.next,v===r))return i}n=n.next}while(n!==x);if(!i)return null;var f=i,a=i.x,y=i.y,l=1/0,o;n=i;do r>=n.x&&n.x>=a&&r!==n.x&&s(e<y?r:u,e,a,y,e<y?u:r,e,n.x,n.y)&&(o=Math.abs(e-n.y)/(r-n.x),m(n,t)&&(o<l||o===l&&(n.x>i.x||n.x===i.x&&Y(i,n)))&&(i=n,l=o)),n=n.next;while(n!==f);return i}function Y(t,x){return Z(t.prev,t,x.prev)<0&&Z(x.next,t,t.next)<0}function $(t,x,n,r){var e=t;do e.z===0&&(e.z=E(e.x,e.y,x,n,r)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==t);e.prevZ.nextZ=null,e.prevZ=null,Q(e)}function Q(t){var x,n,r,e,u,i,v,f,a=1;do{for(n=t,t=null,u=null,i=0;n;){for(i++,r=n,v=0,x=0;x<a&&(v++,r=r.nextZ,!!r);x++);for(f=a;v>0||f>0&&r;)v!==0&&(f===0||!r||n.z<=r.z)?(e=n,n=n.nextZ,v--):(e=r,r=r.nextZ,f--),u?u.nextZ=e:t=e,e.prevZ=u,u=e;n=r}u.nextZ=null,a*=2}while(i>1);return t}function E(t,x,n,r,e){return t=(t-n)*e|0,x=(x-r)*e|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,t|x<<1}function R(t){var x=t,n=t;do(x.x<n.x||x.x===n.x&&x.y<n.y)&&(n=x),x=x.next;while(x!==t);return n}function s(t,x,n,r,e,u,i,v){return(e-i)*(x-v)>=(t-i)*(u-v)&&(t-i)*(r-v)>=(n-i)*(x-v)&&(n-i)*(u-v)>=(e-i)*(r-v)}function T(t,x){return t.next.i!==x.i&&t.prev.i!==x.i&&!H(t,x)&&(m(t,x)&&m(x,t)&&tt(t,x)&&(Z(t.prev,t,x.prev)||Z(t,x.prev,x))||k(t,x)&&Z(t.prev,t,t.next)>0&&Z(x.prev,x,x.next)>0)}function Z(t,x,n){return(x.y-t.y)*(n.x-x.x)-(x.x-t.x)*(n.y-x.y)}function k(t,x){return t.x===x.x&&t.y===x.y}function B(t,x,n,r){var e=C(Z(t,x,n)),u=C(Z(t,x,r)),i=C(Z(n,r,t)),v=C(Z(n,r,x));return!!(e!==u&&i!==v||e===0&&O(t,n,x)||u===0&&O(t,r,x)||i===0&&O(n,t,r)||v===0&&O(n,x,r))}function O(t,x,n){return x.x<=Math.max(t.x,n.x)&&x.x>=Math.min(t.x,n.x)&&x.y<=Math.max(t.y,n.y)&&x.y>=Math.min(t.y,n.y)}function C(t){return t>0?1:t<0?-1:0}function H(t,x){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==x.i&&n.next.i!==x.i&&B(n,n.next,t,x))return!0;n=n.next}while(n!==t);return!1}function m(t,x){return Z(t.prev,t,t.next)<0?Z(t,x,t.next)>=0&&Z(t,t.prev,x)>=0:Z(t,x,t.prev)<0||Z(t,t.next,x)<0}function tt(t,x){var n=t,r=!1,e=(t.x+x.x)/2,u=(t.y+x.y)/2;do n.y>u!=n.next.y>u&&n.next.y!==n.y&&e<(n.next.x-n.x)*(u-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function G(t,x){var n=new F(t.i,t.x,t.y),r=new F(x.i,x.x,x.y),e=t.next,u=x.prev;return t.next=x,x.prev=t,n.next=e,e.prev=n,r.next=n,n.prev=r,u.next=r,r.prev=u,r}function I(t,x,n,r){var e=new F(t,x,n);return r?(e.next=r.next,e.prev=r,r.next.prev=e,r.next=e):(e.prev=e,e.next=e),e}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,x,n){this.i=t,this.x=x,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}j.deviation=function(t,x,n,r){var e=x&&x.length,u=e?x[0]*n:t.length,i=Math.abs(P(t,0,u,n));if(e)for(var v=0,f=x.length;v<f;v++){var a=x[v]*n,y=v<f-1?x[v+1]*n:t.length;i-=Math.abs(P(t,a,y,n))}var l=0;for(v=0;v<r.length;v+=3){var o=r[v]*n,d=r[v+1]*n,c=r[v+2]*n;l+=Math.abs((t[o]-t[c])*(t[d+1]-t[o+1])-(t[o]-t[d])*(t[c+1]-t[o+1]))}return i===0&&l===0?0:Math.abs((l-i)/i)};function P(t,x,n,r){for(var e=0,u=x,i=n-r;u<n;u+=r)e+=(t[i]-t[u])*(t[u+1]+t[i+1]),i=u;return e}j.flatten=function(t){for(var x=t[0][0].length,n={vertices:[],holes:[],dimensions:x},r=0,e=0;e<t.length;e++){for(var u=0;u<t[e].length;u++)for(var i=0;i<x;i++)n.vertices.push(t[e][u][i]);e>0&&(r+=t[e-1].length,n.holes.push(r))}return n};var nt=D.exports,xt=J(nt);export{xt as default};
