function v(r,u){return r<u?-1:r>u?1:r>=u?0:NaN}function d(r){return r.length===1&&(r=C(r)),{left:function(u,o,t,n){for(t==null&&(t=0),n==null&&(n=u.length);t<n;){var a=t+n>>>1;r(u[a],o)<0?t=a+1:n=a}return t},right:function(u,o,t,n){for(t==null&&(t=0),n==null&&(n=u.length);t<n;){var a=t+n>>>1;r(u[a],o)>0?n=a:t=a+1}return t}}}function C(r){return function(u,o){return v(r(u),o)}}var x=d(v),b=x.right,G=x.left,q=b;function H(r,u){u==null&&(u=L);for(var o=0,t=r.length-1,n=r[0],a=new Array(t<0?0:t);o<t;)a[o]=u(n,n=r[++o]);return a}function L(r,u){return[r,u]}function J(r,u,o){var t=r.length,n=u.length,a=new Array(t*n),e,f,i,M;for(o==null&&(o=L),e=i=0;e<t;++e)for(M=r[e],f=0;f<n;++f,++i)a[i]=o(M,u[f]);return a}function K(r,u){return u<r?-1:u>r?1:u>=r?0:NaN}function s(r){return r===null?NaN:+r}function k(r,u){var o=r.length,t=0,n=-1,a=0,e,f,i=0;if(u==null)for(;++n<o;)isNaN(e=s(r[n]))||(f=e-a,a+=f/++t,i+=f*(e-a));else for(;++n<o;)isNaN(e=s(u(r[n],n,r)))||(f=e-a,a+=f/++t,i+=f*(e-a));if(t>1)return i/(t-1)}function S(r,u){var o=k(r,u);return o&&Math.sqrt(o)}function F(r,u){var o=r.length,t=-1,n,a,e;if(u==null){for(;++t<o;)if((n=r[t])!=null&&n>=n)for(a=e=n;++t<o;)(n=r[t])!=null&&(a>n&&(a=n),e<n&&(e=n))}else for(;++t<o;)if((n=u(r[t],t,r))!=null&&n>=n)for(a=e=n;++t<o;)(n=u(r[t],t,r))!=null&&(a>n&&(a=n),e<n&&(e=n));return[a,e]}var z=Array.prototype,O=z.slice,P=z.map;function p(r){return function(){return r}}function Q(r){return r}function D(r,u,o){r=+r,u=+u,o=(n=arguments.length)<2?(u=r,r=0,1):n<3?1:+o;for(var t=-1,n=Math.max(0,Math.ceil((u-r)/o))|0,a=new Array(n);++t<n;)a[t]=r+t*o;return a}var y=Math.sqrt(50),w=Math.sqrt(10),A=Math.sqrt(2);function T(r,u,o){var t,n=-1,a,e,f;if(u=+u,r=+r,o=+o,r===u&&o>0)return[r];if((t=u<r)&&(a=r,r=u,u=a),(f=E(r,u,o))===0||!isFinite(f))return[];if(f>0)for(r=Math.ceil(r/f),u=Math.floor(u/f),e=new Array(a=Math.ceil(u-r+1));++n<a;)e[n]=(r+n)*f;else for(r=Math.floor(r*f),u=Math.ceil(u*f),e=new Array(a=Math.ceil(r-u+1));++n<a;)e[n]=(r-n)/f;return t&&e.reverse(),e}function E(r,u,o){var t=(u-r)/Math.max(0,o),n=Math.floor(Math.log(t)/Math.LN10),a=t/Math.pow(10,n);return n>=0?(a>=y?10:a>=w?5:a>=A?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=y?10:a>=w?5:a>=A?2:1)}function I(r,u,o){var t=Math.abs(u-r)/Math.max(0,o),n=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),a=t/n;return a>=y?n*=10:a>=w?n*=5:a>=A&&(n*=2),u<r?-n:n}function R(r){return Math.ceil(Math.log(r.length)/Math.LN2)+1}function U(){var r=Q,u=F,o=R;function t(n){var a,e=n.length,f,i=new Array(e);for(a=0;a<e;++a)i[a]=r(n[a],a,n);var M=u(i),h=M[0],g=M[1],l=o(i,h,g);Array.isArray(l)||(l=I(h,g,l),l=D(Math.ceil(h/l)*l,g,l));for(var c=l.length;l[0]<=h;)l.shift(),--c;for(;l[c-1]>g;)l.pop(),--c;var m=new Array(c+1),N;for(a=0;a<=c;++a)N=m[a]=[],N.x0=a>0?l[a-1]:h,N.x1=a<c?l[a]:g;for(a=0;a<e;++a)f=i[a],h<=f&&f<=g&&m[q(l,f,0,c)].push(n[a]);return m}return t.value=function(n){return arguments.length?(r=typeof n=="function"?n:p(n),t):r},t.domain=function(n){return arguments.length?(u=typeof n=="function"?n:p([n[0],n[1]]),t):u},t.thresholds=function(n){return arguments.length?(o=typeof n=="function"?n:Array.isArray(n)?p(O.call(n)):p(n),t):o},t}function $(r,u,o){if(o==null&&(o=s),!!(t=r.length)){if((u=+u)<=0||t<2)return+o(r[0],0,r);if(u>=1)return+o(r[t-1],t-1,r);var t,n=(t-1)*u,a=Math.floor(n),e=+o(r[a],a,r),f=+o(r[a+1],a+1,r);return e+(f-e)*(n-a)}}function V(r,u,o){return r=P.call(r,s).sort(v),Math.ceil((o-u)/(2*($(r,.75)-$(r,.25))*Math.pow(r.length,-1/3)))}function W(r,u,o){return Math.ceil((o-u)/(3.5*S(r)*Math.pow(r.length,-1/3)))}function X(r,u){var o=r.length,t=-1,n,a;if(u==null){for(;++t<o;)if((n=r[t])!=null&&n>=n)for(a=n;++t<o;)(n=r[t])!=null&&n>a&&(a=n)}else for(;++t<o;)if((n=u(r[t],t,r))!=null&&n>=n)for(a=n;++t<o;)(n=u(r[t],t,r))!=null&&n>a&&(a=n);return a}function Y(r,u){var o=r.length,t=o,n=-1,a,e=0;if(u==null)for(;++n<o;)isNaN(a=s(r[n]))?--t:e+=a;else for(;++n<o;)isNaN(a=s(u(r[n],n,r)))?--t:e+=a;if(t)return e/t}function Z(r,u){var o=r.length,t=-1,n,a=[];if(u==null)for(;++t<o;)isNaN(n=s(r[t]))||a.push(n);else for(;++t<o;)isNaN(n=s(u(r[t],t,r)))||a.push(n);return $(a.sort(v),.5)}function _(r){for(var u=r.length,o,t=-1,n=0,a,e;++t<u;)n+=r[t].length;for(a=new Array(n);--u>=0;)for(e=r[u],o=e.length;--o>=0;)a[--n]=e[o];return a}function j(r,u){var o=r.length,t=-1,n,a;if(u==null){for(;++t<o;)if((n=r[t])!=null&&n>=n)for(a=n;++t<o;)(n=r[t])!=null&&a>n&&(a=n)}else for(;++t<o;)if((n=u(r[t],t,r))!=null&&n>=n)for(a=n;++t<o;)(n=u(r[t],t,r))!=null&&a>n&&(a=n);return a}function rr(r,u){for(var o=u.length,t=new Array(o);o--;)t[o]=r[u[o]];return t}function nr(r,u){if(o=r.length){var o,t=0,n=0,a,e=r[n];for(u==null&&(u=v);++t<o;)(u(a=r[t],e)<0||u(e,e)!==0)&&(e=a,n=t);if(u(e,e)===0)return n}}function tr(r,u,o){for(var t=(o??r.length)-(u=u==null?0:+u),n,a;t;)a=Math.random()*t--|0,n=r[t+u],r[t+u]=r[a+u],r[a+u]=n;return r}function ar(r,u){var o=r.length,t=-1,n,a=0;if(u==null)for(;++t<o;)(n=+r[t])&&(a+=n);else for(;++t<o;)(n=+u(r[t],t,r))&&(a+=n);return a}function B(r){if(!(a=r.length))return[];for(var u=-1,o=j(r,ur),t=new Array(o);++u<o;)for(var n=-1,a,e=t[u]=new Array(a);++n<a;)e[n]=r[n][u];return t}function ur(r){return r.length}function or(){return B(arguments)}export{v as ascending,q as bisect,G as bisectLeft,b as bisectRight,d as bisector,J as cross,K as descending,S as deviation,F as extent,U as histogram,X as max,Y as mean,Z as median,_ as merge,j as min,H as pairs,rr as permute,$ as quantile,D as range,nr as scan,tr as shuffle,ar as sum,V as thresholdFreedmanDiaconis,W as thresholdScott,R as thresholdSturges,E as tickIncrement,I as tickStep,T as ticks,B as transpose,k as variance,or as zip};
