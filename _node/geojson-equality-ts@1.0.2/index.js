var y=Object.defineProperty,s=(e,t)=>y(e,"name",{value:t,configurable:!0}),m=class{constructor(e){this.direction=!1,this.compareProperties=!0;var t,o,r;this.precision=10**-((t=e?.precision)!=null?t:17),this.direction=(o=e?.direction)!=null?o:!1,this.compareProperties=(r=e?.compareProperties)!=null?r:!0}compare(e,t){if(e.type!==t.type||!l(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){const o=p(e),r=p(t);return o.every(i=>r.some(n=>this.compare(i,n)))}}return!1}compareCoord(e,t){return e.length===t.length&&e.every((o,r)=>Math.abs(o-t[r])<this.precision)}compareLine(e,t,o=0,r=!1){if(!l(e,t))return!1;const i=e;let n=t;if(r&&!this.compareCoord(i[0],n[0])){const c=this.fixStartIndex(n,i);if(c)n=c;else return!1}const a=this.compareCoord(i[o],n[o]);return this.direction||a?this.comparePath(i,n):this.compareCoord(i[o],n[n.length-(1+o)])?this.comparePath(i.slice().reverse(),n):!1}fixStartIndex(e,t){let o,r=-1;for(let i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){r=i;break}return r>=0&&(o=[].concat(e.slice(r,e.length),e.slice(1,r+1))),o}comparePath(e,t){return e.every((o,r)=>this.compareCoord(o,t[r]))}comparePolygon(e,t){if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){const o=e.coordinates.slice(1,e.coordinates.length),r=t.coordinates.slice(1,t.coordinates.length);return o.every(i=>r.some(n=>this.compareLine(i,n,1,!0)))}return!1}compareGeometryCollection(e,t){return l(e.geometries,t.geometries)&&this.compareBBox(e,t)&&e.geometries.every((o,r)=>this.compare(o,t.geometries[r]))}compareFeature(e,t){return e.id===t.id&&(this.compareProperties?h(e.properties,t.properties):!0)&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}compareFeatureCollection(e,t){return l(e.features,t.features)&&this.compareBBox(e,t)&&e.features.every((o,r)=>this.compare(o,t.features[r]))}compareBBox(e,t){return!e.bbox&&!t.bbox||(e.bbox&&t.bbox?this.compareCoord(e.bbox,t.bbox):!1)}};s(m,"GeojsonEquality");var u=m;function l(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}s(l,"sameLength");function p(e){return e.coordinates.map(t=>({type:e.type.replace("Multi",""),coordinates:t}))}s(p,"explode");function d(e,t,o){return new u(o).compare(e,t)}s(d,"geojsonEquality");function h(e,t){if(e===null&&t===null)return!0;if(e===null||t===null)return!1;const o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(var i of o){const n=e[i],a=t[i],c=f(n)&&f(a);if(c&&!h(n,a)||!c&&n!==a)return!1}return!0}s(h,"equal");var f=s(e=>e!=null&&typeof e=="object","isObject"),g=u;export{u as GeojsonEquality,g as default,d as geojsonEquality};
